From 82c3dd373b508bdfddb44b351cb2129585c06eb6 Mon Sep 17 00:00:00 2001
From: Mathew McBride <matt@traverse.com.au>
Date: Wed, 15 Jun 2022 02:32:33 +0000
Subject: [PATCH] soc: fsl: select FSL_GUTS driver for DPIO

The soc/fsl/dpio driver will perform a soc_device_match()
to determine the optimal cache settings for a given CPU core.

If FSL_GUTS is not enabled, this search will fail and
the driver will not configure cache stashing for the given
DPIO, and a string of "unknown SoC" messages will appear:

fsl_mc_dpio dpio.7: unknown SoC version
fsl_mc_dpio dpio.6: unknown SoC version
fsl_mc_dpio dpio.5: unknown SoC version

Signed-off-by: Mathew McBride <matt@traverse.com.au>
Fixes: 51da14e96e9b ("soc: fsl: dpio: configure cache stashing destination")
Cc: stable@vger.kernel.org
---
 drivers/soc/fsl/Kconfig | 1 +
 1 file changed, 1 insertion(+)

Index: linux-5.15.63/drivers/soc/fsl/Kconfig
===================================================================
--- linux-5.15.63.orig/drivers/soc/fsl/Kconfig
+++ linux-5.15.63/drivers/soc/fsl/Kconfig
@@ -23,6 +23,7 @@ config FSL_GUTS
 config FSL_MC_DPIO
         tristate "QorIQ DPAA2 DPIO driver"
         depends on FSL_MC_BUS
+        select FSL_GUTS
         select SOC_BUS
         help
 	  Driver for the DPAA2 DPIO object.  A DPIO provides queue and
